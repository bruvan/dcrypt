<%- include('headerin'); -%>
<div id="questionz">
  <h1 class="heading">Questions</h1>
  <% if (Date.now() < new Date("Sep 7, 2020 22:00:00")) { %>
  <h1 style="text-align: center; color: white">dCrypt Goes Live in :</h1>
  <div class="countdown">
    <div class="box">
      <h2 id="days">0</h2>
      <span>Days</span>
    </div>
    <div class="box">
      <h2 id="hours">0</h2>

      <span>Hours</span>
    </div>
    <div class="box">
      <h2 id="minutes">0</h2>

      <span>Minutes</span>
    </div>
    <div class="box">
      <h2 id="seconds">0</h2>

      <span>Seconds</span>
    </div>
  </div>
  <script>
    window.onload = function () {
      var countDownDate = new Date("Sep 7, 2020 22:00:00").getTime();

      var x = setInterval(function () {
        var now = new Date().getTime();

        var distance = countDownDate - now;

        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        document.getElementById("days").innerHTML = days;
        document.getElementById("hours").innerHTML = hours;
        document.getElementById("minutes").innerHTML = minutes;
        document.getElementById("seconds").innerHTML = seconds;
      }, 1000);
    };
  </script>
  <% } else { %>
  <div class="questions">
    <% locals.questions.forEach( function (element){ %>
    <div <% if (locals.team.questions.includes(element.title)) { %>
      style="background:#9D1111;cursor:default" <% }else{ %>
      onclick="openModal('<%- element.title %>')"<% }%> class="question" >
      <div class="qcontent">
        <p><%- element.title %></p>
        <p><%- element.points %></p>
      </div>
    </div>
    <% }) %> <% locals.questions.forEach( function (element){ %> <% if
    (!locals.team.questions.includes(element.title)) { %> <div id="<%-
    element.title %>" class="qmodal" <% if (locals.curr===element.title){ %>
    style="display: block" <%}%>>
    <form action="/answer" method="POST">
      <p class="close" onclick="closeModal('<%= element.title %>')">&#10060;</p>
      <div class="qinfo">
        <p>
          <input
            type="hidden"
            value="<%= element.title%>"
            name="title"
            class="defender"
            readonly
          />
        </p>
        <p class="qhead"><%- element.title %></p>
        <p class="qtext"><%- element.question %></p>
        <% if (element.attachment!=""){ %>
        <a
          class="attacher"
          href="/questionfiles/<%-(element.attachment)%>"
          download="<%- element.attachment %>"
          target="_blank"
        >
          <%- element.attachment %>
        </a>
        <% } %>
        <div class="sidebyside">
          <input type="text" name="ans" <% if (locals.curr===element.title){ %>
          value="Incorrect" style="color:red;border:1px solid red"<%}%>/>
          <button>Submit</button>
        </div>
      </div>
    </form>
  </div>
  <% } }) %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

  <script>
    $(document).ready(function () {
      $('input[name = "ans"]').click(function (e) {
        e.preventDefault();
        $(this).css({ color: "white", opacity: "0.8", border: "none" });
        $(this).attr({ value: "" });
      });
    });

    function openModal(id) {
      $(".qmodal").each(function () {
        $(this).css({ display: "none" });
      });
      document.getElementById(id).style.display = "block";
    }
    function closeModal(id) {
      document.getElementById(id).style.display = "none";
    }
  </script>
  <% }%> <%- include('footer'); -%>
</div>
